<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" width="1200" height="800">
  <defs>
    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#2563eb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f8fafc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e2e8f0;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000000" flood-opacity="0.1"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="#ffffff"/>
  
  <!-- Header -->
  <rect x="0" y="0" width="1200" height="80" fill="url(#headerGradient)"/>
  <text x="600" y="35" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="28" font-weight="bold">
    EntityDB v2.32.6 - Unified File Format Architecture
  </text>
  <text x="600" y="65" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="16" font-weight="normal">
    Single Source of Truth - Unified .edb Format Only
  </text>
  
  <!-- Architecture Layers -->
  
  <!-- Layer 1: Client Interfaces -->
  <g transform="translate(50, 100)">
    <rect x="0" y="0" width="1100" height="100" fill="url(#layerGradient)" stroke="#cbd5e1" stroke-width="2" rx="8" filter="url(#shadow)"/>
    <text x="20" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e293b">Client Interfaces</text>
    
    <!-- Client Applications -->
    <rect x="50" y="40" width="200" height="45" fill="#dbeafe" stroke="#3b82f6" stroke-width="1" rx="4"/>
    <text x="150" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#1e40af">Worca Platform</text>
    
    <rect x="280" y="40" width="150" height="45" fill="#ecfdf5" stroke="#10b981" stroke-width="1" rx="4"/>
    <text x="355" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#047857">Web Dashboard</text>
    
    <rect x="460" y="40" width="150" height="45" fill="#fef3c7" stroke="#f59e0b" stroke-width="1" rx="4"/>
    <text x="535" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#92400e">Custom Apps</text>
    
    <rect x="640" y="40" width="150" height="45" fill="#f3e8ff" stroke="#8b5cf6" stroke-width="1" rx="4"/>
    <text x="715" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#6b21a8">CLI Tools</text>
    
    <rect x="820" y="40" width="200" height="45" fill="#fce7f3" stroke="#ec4899" stroke-width="1" rx="4"/>
    <text x="920" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#be185d">Monitoring Systems</text>
  </g>
  
  <!-- Layer 2: API Gateway & Security -->
  <g transform="translate(50, 220)">
    <rect x="0" y="0" width="1100" height="90" fill="url(#layerGradient)" stroke="#cbd5e1" stroke-width="2" rx="8" filter="url(#shadow)"/>
    <text x="20" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e293b">API Gateway & Security</text>
    
    <!-- REST API -->
    <rect x="50" y="35" width="180" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="1" rx="4"/>
    <text x="140" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1e40af">REST API (61+ endpoints)</text>
    
    <!-- Authentication -->
    <rect x="250" y="35" width="150" height="40" fill="#fed7d7" stroke="#f56565" stroke-width="1" rx="4"/>
    <text x="325" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#c53030">JWT Auth</text>
    
    <!-- RBAC -->
    <rect x="420" y="35" width="150" height="40" fill="#ffeaa7" stroke="#fdcb6e" stroke-width="1" rx="4"/>
    <text x="495" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#a29bfe">Tag-Based RBAC</text>
    
    <!-- Middleware -->
    <rect x="590" y="35" width="150" height="40" fill="#d4edda" stroke="#28a745" stroke-width="1" rx="4"/>
    <text x="665" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#155724">Middleware Stack</text>
    
    <!-- Metrics -->
    <rect x="760" y="35" width="120" height="40" fill="#e1ecf4" stroke="#6c757d" stroke-width="1" rx="4"/>
    <text x="820" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#495057">Metrics & Health</text>
    
    <!-- CORS -->
    <rect x="900" y="35" width="100" height="40" fill="#f8d7da" stroke="#dc3545" stroke-width="1" rx="4"/>
    <text x="950" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#721c24">CORS Handler</text>
  </g>
  
  <!-- Layer 3: Business Logic -->
  <g transform="translate(50, 330)">
    <rect x="0" y="0" width="1100" height="90" fill="url(#layerGradient)" stroke="#cbd5e1" stroke-width="2" rx="8" filter="url(#shadow)"/>
    <text x="20" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e293b">Business Logic & Services</text>
    
    <!-- Entity Operations -->
    <rect x="50" y="35" width="140" height="40" fill="#e6fffa" stroke="#38b2ac" stroke-width="1" rx="4"/>
    <text x="120" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2c7a7b">Entity CRUD</text>
    
    <!-- Temporal Queries -->
    <rect x="210" y="35" width="140" height="40" fill="#ede9fe" stroke="#8b5cf6" stroke-width="1" rx="4"/>
    <text x="280" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6b21a8">Temporal Queries</text>
    
    <!-- Dataset Management -->
    <rect x="370" y="35" width="140" height="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="1" rx="4"/>
    <text x="440" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#92400e">Dataset Mgmt</text>
    
    <!-- User Management -->
    <rect x="530" y="35" width="140" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="1" rx="4"/>
    <text x="600" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1e40af">User Mgmt</text>
    
    <!-- Configuration -->
    <rect x="690" y="35" width="140" height="40" fill="#f0fff4" stroke="#48bb78" stroke-width="1" rx="4"/>
    <text x="760" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2f855a">Configuration</text>
    
    <!-- Background Services -->
    <rect x="850" y="35" width="140" height="40" fill="#fed7e2" stroke="#ed64a6" stroke-width="1" rx="4"/>
    <text x="920" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#97266d">Background Svc</text>
  </g>
  
  <!-- Layer 4: Repository & Caching -->
  <g transform="translate(50, 440)">
    <rect x="0" y="0" width="1100" height="90" fill="url(#layerGradient)" stroke="#cbd5e1" stroke-width="2" rx="8" filter="url(#shadow)"/>
    <text x="20" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e293b">Repository & Caching Layer</text>
    
    <!-- Unified Repository -->
    <rect x="50" y="35" width="200" height="40" fill="#e6fffa" stroke="#38b2ac" stroke-width="1" rx="4"/>
    <text x="150" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2c7a7b">Unified EntityRepository</text>
    
    <!-- Cache Layer -->
    <rect x="270" y="35" width="150" height="40" fill="#fff5f5" stroke="#feb2b2" stroke-width="1" rx="4"/>
    <text x="345" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#c53030">Cache Layer</text>
    
    <!-- Query Optimization -->
    <rect x="440" y="35" width="180" height="40" fill="#ede9fe" stroke="#8b5cf6" stroke-width="1" rx="4"/>
    <text x="530" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6b21a8">Query Optimization</text>
    
    <!-- String Interning -->
    <rect x="640" y="35" width="150" height="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="1" rx="4"/>
    <text x="715" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#92400e">String Interning</text>
    
    <!-- Buffer Pools -->
    <rect x="810" y="35" width="150" height="40" fill="#f0fff4" stroke="#48bb78" stroke-width="1" rx="4"/>
    <text x="885" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2f855a">Buffer Pools</text>
  </g>
  
  <!-- Layer 5: Storage Engine -->
  <g transform="translate(50, 550)">
    <rect x="0" y="0" width="1100" height="90" fill="url(#layerGradient)" stroke="#cbd5e1" stroke-width="2" rx="8" filter="url(#shadow)"/>
    <text x="20" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e293b">Storage Engine</text>
    
    <!-- Unified Format -->
    <rect x="50" y="35" width="160" height="40" fill="#fed7e2" stroke="#ed64a6" stroke-width="1" rx="4"/>
    <text x="130" y="48" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#97266d">EUFF Unified Format</text>
    <text x="130" y="62" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#97266d">Single .edb File</text>
    
    <!-- Sharded Indexing -->
    <rect x="230" y="35" width="160" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="1" rx="4"/>
    <text x="310" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1e40af">256-Shard Indexing</text>
    
    <!-- Embedded WAL -->
    <rect x="410" y="35" width="140" height="40" fill="#ffeaa7" stroke="#fdcb6e" stroke-width="1" rx="4"/>
    <text x="480" y="48" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#a29bfe">Embedded WAL</text>
    <text x="480" y="62" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#a29bfe">Within .edb File</text>
    
    <!-- Memory Mapping -->
    <rect x="570" y="35" width="150" height="40" fill="#e6fffa" stroke="#38b2ac" stroke-width="1" rx="4"/>
    <text x="645" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2c7a7b">Memory Mapping</text>
    
    <!-- Compression -->
    <rect x="740" y="35" width="120" height="40" fill="#f0fff4" stroke="#48bb78" stroke-width="1" rx="4"/>
    <text x="800" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2f855a">Compression</text>
    
    <!-- Auto-Recovery -->
    <rect x="880" y="35" width="120" height="40" fill="#fed7d7" stroke="#f56565" stroke-width="1" rx="4"/>
    <text x="940" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#c53030">Auto Recovery</text>
  </g>
  
  <!-- Layer 6: Persistent Storage -->
  <g transform="translate(50, 660)">
    <rect x="0" y="0" width="1100" height="90" fill="url(#layerGradient)" stroke="#cbd5e1" stroke-width="2" rx="8" filter="url(#shadow)"/>
    <text x="20" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e293b">Persistent Storage</text>
    
    <!-- Unified Database File -->
    <rect x="100" y="35" width="300" height="40" fill="#e6fffa" stroke="#38b2ac" stroke-width="2" rx="4"/>
    <text x="250" y="48" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c7a7b">entities.edb (Unified Format)</text>
    <text x="250" y="62" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2c7a7b">Data + WAL + Index in Single File</text>
    
    <!-- Configuration -->
    <rect x="420" y="35" width="180" height="40" fill="#f0fff4" stroke="#48bb78" stroke-width="1" rx="4"/>
    <text x="510" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2f855a">Config Files (.env)</text>
    
    <!-- Logs -->
    <rect x="620" y="35" width="180" height="40" fill="#e1ecf4" stroke="#6c757d" stroke-width="1" rx="4"/>
    <text x="710" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#495057">Runtime Logs (.log)</text>
  </g>
  
  <!-- Key Architecture Highlights -->
  <g transform="translate(50, 770)">
    <text x="0" y="15" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#374151">Key Features:</text>
    <text x="100" y="15" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">• Temporal Tags (Nanosecond Precision)</text>
    <text x="320" y="15" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">• Zero-Copy Memory-Mapped Reads</text>
    <text x="540" y="15" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">• 256-Shard Concurrent Indexing</text>
    <text x="750" y="15" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">• Self-Healing Architecture</text>
    <text x="950" y="15" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">• 100% Debt-Free</text>
  </g>
  
</svg>